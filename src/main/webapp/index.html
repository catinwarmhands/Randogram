<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Random winner selector for instagram contests">
    <meta name="author" content="Randogram">

    <title>Randogram</title>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!--Libs-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="resources/js/lib/moment.min.js"></script>
    <script src="http://knockoutjs.com/downloads/knockout-3.4.0.js"></script>

    <!--Bootstrap-->
    <script src="resources/js/lib/bootstrap.js"></script>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <!--DateTimePicker-->
    <script src="https://cdn.rawgit.com/Eonasdan/bootstrap-datetimepicker/a549aa8780dbda16f6cff545aeabc3d71073911e/src/js/bootstrap-datetimepicker.js"></script>
    <link rel="stylesheet" href="https://cdn.rawgit.com/Eonasdan/bootstrap-datetimepicker/a549aa8780dbda16f6cff545aeabc3d71073911e/build/css/bootstrap-datetimepicker.css">
    <script src="resources/js/datetimepicker-binding.js"></script>

    <!--Tags input-->
    <script src="resources/js/lib/bootstrap-tagsinput.js"></script>
    <link rel="stylesheet" href="resources/css/lib/bootstrap-tagsinput.css">

    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="resources/css/randogram.css">

    <!--Ladda-->
    <link rel="stylesheet" href="resources/css/lib/ladda.min.css">
    <script src="resources/js/lib/spin.min.js"></script>
    <script src="resources/js/lib/ladda.min.js"></script>
    <script src="resources/js/ladda-binding.js"></script>

    <!--numeric binding for winners amount field-->
    <script src="resources/js/numeric-binding.js"></script>
</head>
<body>
<div class="left-menu">
    <div class="logo"><img src="./resources/images/logo.png"></div>

    <div class="controls">
        <div class="panel-group" id="accordion">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse1">Basic</a>
                    </h4>
                </div>
                <div id="collapse1" class="panel-collapse collapse in">
                    <div class="panel-body">
<!--Basic-->
                        <div class="tags-section">
                            <label for="tags1">Tags:</label>
                            <input type="text" class="form-control" data-bind="value: tagsHandler" data-role="tagsinput" id="tags1"/>
                        </div>

                        <div class="dropdown">
                            <label for="dropdownMenu1">Uploaded</label>
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span data-bind="text: dateFilterSelected"></span>
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1" data-bind="foreach: $root.dateFilterPresetsBasic">
                                <li data-bind="css: {'disabled' : statusName==$parent.dateFilterSelected()}, click: $parent.dateFilterClickHandler">
                                    <a><span data-bind="text: statusName"></span></a>
                                </li>
                            </ul>
                        </div>
                        <div class="basicDateFrom-section" data-bind="visible: dateFilterSelected() === 'Specify day'">
                            <div class="form-group">
                                <div class="input-group date" id="basicDateFrom" data-bind="datetimepicker: dateFrom">
                                    <input type="text" class="form-control"/>
                                    <span class="input-group-addon">
                                        <span class="glyphicon-calendar glyphicon"></span>
                                    </span>
                                </div>
                            </div>
                        </div>
<!--/Basic-->
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse2">Advanced</a></h4>
                </div>
                <div id="collapse2" class="panel-collapse collapse">
                    <div class="panel-body">
<!--Advanced-->
                        <div class="tags-section">
                            <label for="tags2">Tags:</label>
                            <input type="text" class="form-control" data-bind="value: tagsHandler" data-role="tagsinput" id="tags2"/>
                        </div>
                        <div class="following-section">
                            <label for="sub">Only GDS followers:</label>
                            <input type="checkbox" name="sub" id="sub" data-bind="checked: isFollowing">
                        </div>
                        <div class="dropdown">
                            <label for="dropdownMenu1">Uploaded</label>
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span data-bind="text: dateFilterSelected"></span>
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1" data-bind="foreach: $root.dateFilterPresetsAdvanced">
                                <li data-bind="css: {'disabled' : statusName==$parent.dateFilterSelected()}, click: $parent.dateFilterClickHandler">
                                    <a><span data-bind="text: statusName"></span></a>
                                </li>
                            </ul>
                        </div>
                        <div class="advancedDateFrom-section" data-bind="visible: dateFilterSelected() === 'Specify day' || dateFilterSelected() === 'Specify interval'">
                            <div class="form-group">
                                <div class="input-group date" id="advancedDateFrom" data-bind="datetimepicker: dateFrom">
                                    <input type="text" class="form-control"/>
                                    <span class="input-group-addon">
                                        <span class="glyphicon-calendar glyphicon"></span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="advancedDateTo-section" data-bind="visible: dateFilterSelected() === 'Specify interval'">
                            <div class="form-group">
                                <div class="input-group date" id="advancedDateTo" data-bind="datetimepicker: dateTo">
                                    <input type="text" class="form-control"/>
                                    <span class="input-group-addon">
                                        <span class="glyphicon-calendar glyphicon"></span>
                                    </span>
                                </div>
                            </div>
                        </div>
<!--/Advanced-->
                    </div>
                </div>
            </div>
        </div>
        <div class="search-button">
            <button class="ladda-button" data-color="green" data-style="slide-down" type="button" data-bind="enable: isSearchButtonEnabled, click: searchAction, ladda: isLoading">Search</button>
        </div>
        <div class="chooseLucky-section" data-bind="visible: isSearchDone">
            <div class="search-info">
                <span data-bind="text: searchInfo"></span>
            </div>
            <div class="winners-amount" >
                <label for="winners-amount-field">Winners amount:</label>
                <div class="form-group">
                    <div class="input-group">
                        <input type="text" class="form-control" data-bind="numeric, value: winnersAmount" id="winners-amount-field"/>
                        <span class="input-group-addon"data-bind="click: winnersAmountMinus"><span class="glyphicon glyphicon-minus"></span></span>
                        <span class="input-group-addon"data-bind="click: winnersAmountPlus"><span class="glyphicon glyphicon-plus"></span></span>
                    </div>
                </div>
            </div>
            <div class="chooseLucky-button">
                <button class="ladda-button" data-color="blue" type="button" data-bind="click: selectAction, enable: isLuckyButtonEnabled" data-toggle="modal" data-target="#winnersModal">Who is lucky?</button>
            </div>
        </div>
    </div>
</div>

<div class="right">
    <div class="content" data-bind="foreach: images">
        <div class="image-cell">
            <div class="image-info-top">
                <div class="time"><span data-bind="text: $parent.getMoment(unixTime)"></span></div>
            </div>
            <div class="image-info-bottom">
                <div class="comments">☰<span data-bind="text: commentsAmount"></span></div>
                <div class="likes"><span data-bind="text: likes"></span>♥</div>
            </div>
            <div class="user-avatar">
                <a data-bind="attr: {href: userUrl}"><img data-bind="attr: {src: user.profile_picture}" class="img-circle"></a>
            </div>
            <div class="image-thumbnail">
                <a data-bind="click: $parent.setPreview" data-toggle="modal" data-target="#previewModal"><img data-bind="attr: {src: thumbnail}"></a>
            </div>
        </div>
    </div>
</div>

<!--placeholder, will be removed-->
<div id="winnersModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Winners!</h4>
            </div>
            <div class="modal-body">
                <div class="winners" data-bind="foreach: winners">
                    <div class="winner" id="winner">
                        <div class="head-info">
                            <div class="avatar">
                                <a data-bind="attr: {href: userUrl}"><img data-bind="attr: {src: user.profile_picture}" class="img-circle"></a>
                            </div>
                            <a data-bind="attr: {href: userUrl}">
                            <div class="text-info">
                                <div class="fullname">
                                    <a data-bind="text: user.full_name, attr: {href: userUrl}"></a>
                                </div>
                                <div class="username">
                                    <a data-bind="text: user.username, attr: {href: userUrl}"></a>
                                </div>
                            </div>
                            </a>
                        </div>
                        <div class="image">
                            <a data-bind="attr: {href: link}"><img data-bind="attr: {src: standard}"></a>
                        </div> <hr>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="previewModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content" id="instlink">
            <div class="previews" data-bind="foreach: preview">
                <div class="preview" id="preview">
                    <div class="head-info">
                        <div class="avatar">
                            <a data-bind="attr: {href: userUrl}"><img data-bind="attr: {src: user.profile_picture}" class="img-circle"></a>
                        </div>
                        <a data-bind="attr: {href: userUrl}">
                            <div class="text-info">
                                <div class="fullname">
                                    <a data-bind="text: user.full_name, attr: {href: userUrl}"></a>
                                </div>
                                <div class="username">
                                    <a data-bind="text: user.username, attr: {href: userUrl}"></a>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="image">
                        <a data-bind="attr: {href: link}"><img data-bind="attr: {src: standard}"></a>
                    </div>
                    <div class="image-info">
                        <hr>
                        <div class="time"><span data-bind="text: $parent.getMoment(unixTime)"></span></div>
                        <div class="comments"><span data-bind="text: commentsAmount"></span>☰</div>
                        <div class="likes"><span data-bind="text: likes"></span>♥</div>
                        <hr>
                        <div class="caption"><span data-bind="text: caption"></span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Custom scripts for this template-->
<script src="resources/js/randogram.js"></script>
</body>
</html>